{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Filter","onChange","PersonForm","onSubmit","nameChange","numberChange","name","number","value","type","Persons","persons","filterVal","deleteFn","filter","person","toLowerCase","includes","map","idx","key","onClick","bind","Notification","message","error","className","baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","res","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setFilterVal","setMessage","errMessage","setErrMessage","useEffect","services","generateFn","fn","e","target","messageCountdown","timeout","setTimeout","updatePerson","window","confirm","index","findIndex","copy","splice","catch","err","createPerson","preventDefault","find","el","ReactDOM","render","document","getElementById"],"mappings":"kOAMeA,EAJA,SAAC,GAAD,IAAGC,EAAH,EAAGA,SAAH,OAAkB,kDACX,2BAAOA,SAAUA,MCOxBC,EARI,SAAC,GAAD,IAAGC,EAAH,EAAGA,SAAUC,EAAb,EAAaA,WAAYC,EAAzB,EAAyBA,aAAcC,EAAvC,EAAuCA,KAAMC,EAA7C,EAA6CA,OAA7C,OAA0D,0BAAMJ,SAAUA,GACzF,sCAAW,2BAAOF,SAAUG,EAAYI,MAAOF,KAC/C,wCAAa,2BAAOL,SAAUI,EAAcG,MAAOD,KACnD,6BACI,4BAAQE,KAAK,UAAb,UCDOC,EAHC,SAAC,GAAD,IAAGC,EAAH,EAAGA,QAASC,EAAZ,EAAYA,UAAWC,EAAvB,EAAuBA,SAAvB,OAAsCF,EAAQG,QAAO,SAACC,GAAD,OAAYH,GAAYG,EAAOT,KAAKU,cAAcC,SAASL,EAAUI,kBACrIE,KAAI,SAACH,EAAQI,GAAT,OAAiB,yBAAKC,IAAKD,GAAMJ,EAAOT,KAAvB,IAA8BS,EAAOR,OAAO,4BAAQc,QAASR,EAASS,KAAK,GAAIP,IAAnC,eCYvDQ,EAbM,SAAC,GAAgC,IAA9BC,EAA6B,EAA7BA,QAA6B,IAApBC,aAAoB,SACjD,OAAgB,OAAZD,EACO,KAIP,yBAAKE,UAAWD,EAAQ,QAAU,WAC7BD,I,gBCPPG,EAAU,eAsBD,EApBA,WAEX,OADgBC,IAAMC,IAAIF,GACXG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAkB9B,EAfA,SAAAC,GAEX,OADgBL,IAAMM,KAAKP,EAASM,GACrBH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAa9B,EAVA,SAACG,EAAIF,GAEhB,OADgBL,IAAMQ,IAAN,UAAaT,EAAb,YAAwBQ,GAAMF,GAC/BH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAQ9B,EALM,SAACG,GAElB,OADgBP,IAAMS,OAAN,UAAgBV,EAAhB,YAA2BQ,IAC5BL,MAAK,SAAAQ,GAAG,OAAIA,EAAIN,SCuEpBO,EAnFH,WAAO,IAAD,EACcC,mBAAS,IADvB,mBACT7B,EADS,KACA8B,EADA,OAEcD,mBAAS,IAFvB,mBAETE,EAFS,KAEAC,EAFA,OAGkBH,mBAAS,IAH3B,mBAGTI,EAHS,KAGEC,EAHF,OAIkBL,mBAAS,IAJ3B,mBAIT5B,EAJS,KAIEkC,EAJF,OAKcN,mBAAS,IALvB,mBAKThB,EALS,KAKAuB,EALA,OAMoBP,mBAAS,IAN7B,mBAMTQ,EANS,KAMGC,EANH,KAQhBC,qBAAU,WACRC,IAAkBrB,MAAK,SAAAQ,GAAG,OAAIG,EAAWH,QACxC,IAEH,IAUMc,EAAa,SAAAC,GACjB,OAAO,SAAAC,GACLD,EAAGC,EAAEC,OAAO/C,SAIVgD,EAAmB,SAAChC,GAA4C,IAAnCC,EAAkC,wDAAnBgC,EAAmB,uDAAT,IAC1DhC,EAAQwB,EAAczB,GAAWuB,EAAWvB,GAC5CkC,YAAW,WACTjC,EAAQwB,EAAc,IAAMF,EAAW,MACtCU,IAGCE,EAAe,SAACxB,GACpByB,OAAOC,QAAP,UACKnB,EADL,4EAEKS,EAAgBhB,EAAI,CAAE7B,KAAMoC,EAASnC,OAAQqC,IAAad,MAAK,SAAAQ,GAClE,IAAIwB,EAAQnD,EAAQoD,WAAU,SAAAhD,GAAM,OAAIA,EAAOoB,KAAOG,EAAIH,MACtD6B,EAAI,YAAOrD,GACfqD,EAAKC,OAAOH,EAAO,EAAGxB,GACtBG,EAAWuB,GACXR,EAAiB,WAAD,OAAYlB,EAAIhC,KAAhB,iBACf4D,OAAM,SAAAC,GACPhB,IAAkBrB,MAAK,SAAAQ,GAAG,OAAIG,EAAWH,MAGzCkB,EAAiBW,EAAIpC,SAASC,KAAKP,OAAO,OAIxC2C,EAAe,WAEnBjB,EAAgB,CAAE7C,KAAMoC,EAASnC,OAAQqC,IAAad,MAAK,SAAAQ,GACzDG,EAAW,GAAD,mBAAK9B,GAAL,CAAc2B,KACxBkB,EAAiB,SAAD,OAAUlB,EAAIhC,UAC7B4D,OAAM,SAAAC,GACPX,EAAiBW,EAAIpC,SAASC,KAAKP,OAAO,OAU9C,OACE,6BACE,yCACCD,GAAW,kBAAC,EAAD,CAAQA,QAASA,IAC5BwB,GAAc,kBAAC,EAAD,CAAQxB,QAASwB,EAAYvB,OAAO,IACnD,kBAAC,EAAD,CAAQxB,SAAUmD,EAAWN,KAC7B,yCACA,kBAAC,EAAD,CAAY3C,SA/DC,SAACmD,GAChBA,EAAEe,iBAEF1D,EAAQ2D,MAAK,SAAAvD,GAAM,OAAIA,EAAOT,OAASoC,KACrCiB,EAAahD,EAAQG,QAAO,SAAAC,GAAM,OAAIA,EAAOT,OAASoC,KAAS,GAAGP,IAClEiC,IACFzB,EAAW,IACXE,EAAa,KAwDqBvC,KAAMoC,EAAStC,WAAYgD,EAAWT,GACpEtC,aAAc+C,EAAWP,GAAetC,OAAQqC,IAClD,uCACA,kBAAC,EAAD,CAASjC,QAASA,EAASC,UAAWA,EAAWC,SAhBhC,SAAAE,GACnB6C,OAAOC,QAAP,iBAAyB9C,EAAOT,KAAhC,QAA6C6C,EAAsBpC,EAAOoB,IAAIL,MAAK,SAAAQ,GACjFG,EAAW9B,EAAQG,QAAO,SAAAyD,GAAE,OAAIA,EAAGpC,KAAOpB,EAAOoB,eCpEvDqC,IAASC,OACP,kBAAC,EAAD,MACAC,SAASC,eAAe,W","file":"static/js/main.a8e1657c.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = ({ onChange }) => <div>\r\n    filter shown with <input onChange={onChange} />\r\n</div>\r\n\r\nexport default Filter;\r\n","import React from 'react'\r\n\r\nconst PersonForm = ({ onSubmit, nameChange, numberChange, name, number }) => <form onSubmit={onSubmit}>\r\n    <div>name: <input onChange={nameChange} value={name} /></div>\r\n    <div>number: <input onChange={numberChange} value={number} /></div>\r\n    <div>\r\n        <button type=\"submit\">add</button>\r\n    </div>\r\n</form>\r\n\r\nexport default PersonForm;\r\n\r\n\r\n\r\n","import React from 'react'\r\n\r\nconst Persons = ({ persons, filterVal, deleteFn }) => persons.filter((person) => filterVal ? person.name.toLowerCase().includes(filterVal.toLowerCase()) : true)\r\n    .map((person, idx) => <div key={idx}>{person.name} {person.number}<button onClick={deleteFn.bind('', person)}>delete</button></div>)\r\n\r\nexport default Persons;\r\n\r\n\r\n","import React from 'react'\r\n\r\nconst Notification = ({ message, error = false }) => {\r\n    if (message === null) {\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div className={error ? \"error\" : \"success\"}>\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default Notification;\r\n\r\n\r\n\r\n\r\n","import axios from \"axios\";\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(res => res.data)\r\n}\r\n\r\nexport default { getAll, create, update, deletePerson }\r\n\r\n","import React, { useState, useEffect } from 'react'\r\n\r\nimport Filter from \"./components/Filter\"\r\nimport PersonForm from \"./components/PersonForm\"\r\nimport Persons from \"./components/Persons\"\r\nimport Notice from \"./components/Notification\"\r\n\r\nimport services from \"./services/persons\"\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n  const [newName, setNewName] = useState('')\r\n  const [newNumber, setNewNumber] = useState('')\r\n  const [filterVal, setFilterVal] = useState('')\r\n  const [message, setMessage] = useState('')\r\n  const [errMessage, setErrMessage] = useState('')\r\n\r\n  useEffect(() => {\r\n    services.getAll().then(res => setPersons(res))\r\n  }, [])\r\n\r\n  const submitFn = (e) => {\r\n    e.preventDefault();\r\n\r\n    persons.find(person => person.name === newName) ?\r\n      updatePerson(persons.filter(person => person.name === newName)[0].id) :\r\n      createPerson()\r\n    setNewName('')\r\n    setNewNumber('')\r\n  }\r\n\r\n  const generateFn = fn => {\r\n    return e => {\r\n      fn(e.target.value)\r\n    }\r\n  }\r\n\r\n  const messageCountdown = (message, error = false, timeout = 3000) => {\r\n    error ? setErrMessage(message) : setMessage(message);\r\n    setTimeout(() => {\r\n      error ? setErrMessage('') : setMessage('');\r\n    }, timeout);\r\n  }\r\n\r\n  const updatePerson = (id) => {\r\n    window.confirm(\r\n      `${newName} is already added to phonebook, replace the old number with a new one?`\r\n    ) && services.update(id, { name: newName, number: newNumber }).then(res => {\r\n      let index = persons.findIndex(person => person.id === res.id);\r\n      let copy = [...persons]\r\n      copy.splice(index, 1, res)\r\n      setPersons(copy)\r\n      messageCountdown(`Updated ${res.name}'s number`)\r\n    }).catch(err => {\r\n      services.getAll().then(res => setPersons(res))\r\n      // setPersons(persons.filter(person => person.id !== id))\r\n      // messageCountdown(`Information of ${newName}  has already been removed from the server`, true)\r\n      messageCountdown(err.response.data.error, true)\r\n    })\r\n  }\r\n\r\n  const createPerson = () => {\r\n    // setPersons([...persons, { name: newName, number: newNumber }]);\r\n    services.create({ name: newName, number: newNumber }).then(res => {\r\n      setPersons([...persons, res])\r\n      messageCountdown(`Added ${res.name}`)\r\n    }).catch(err => {\r\n      messageCountdown(err.response.data.error, true)\r\n    })\r\n  }\r\n\r\n  const removePerson = person => {\r\n    window.confirm(`Delete ${person.name} ?`) && services.deletePerson(person.id).then(res => {\r\n      setPersons(persons.filter(el => el.id !== person.id))\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      {message && <Notice message={message} ></Notice>}\r\n      {errMessage && <Notice message={errMessage} error={true} ></Notice>}\r\n      <Filter onChange={generateFn(setFilterVal)} ></Filter>\r\n      <h3>add a new</h3>\r\n      <PersonForm onSubmit={submitFn} name={newName} nameChange={generateFn(setNewName)}\r\n        numberChange={generateFn(setNewNumber)} number={newNumber} ></PersonForm>\r\n      <h3>Numbers</h3>\r\n      <Persons persons={persons} filterVal={filterVal} deleteFn={removePerson} ></Persons>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}