(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,n,t){e.exports=t(40)},22:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(16),u=t.n(c),o=(t(22),t(6)),i=t(2),l=function(e){var n=e.onChange;return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{onChange:n}))},m=function(e){var n=e.onSubmit,t=e.nameChange,a=e.numberChange,c=e.name,u=e.number;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{onChange:t,value:c})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{onChange:a,value:u})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},f=function(e){var n=e.persons,t=e.filterVal,a=e.deleteFn;return n.filter((function(e){return!t||e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e,n){return r.a.createElement("div",{key:n},e.name," ",e.number,r.a.createElement("button",{onClick:a.bind("",e)},"delete"))}))},d=function(e){var n=e.message,t=e.error,a=void 0!==t&&t;return null===n?null:r.a.createElement("div",{className:a?"error":"success"},n)},s=t(4),b=t.n(s),h="/api/persons",v=function(){return b.a.get(h).then((function(e){return e.data}))},p=function(e){return b.a.post(h,e).then((function(e){return e.data}))},E=function(e,n){return b.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},g=function(e){return b.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},j=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],u=Object(a.useState)(""),s=Object(i.a)(u,2),b=s[0],h=s[1],j=Object(a.useState)(""),O=Object(i.a)(j,2),w=O[0],C=O[1],S=Object(a.useState)(""),k=Object(i.a)(S,2),y=k[0],I=k[1],x=Object(a.useState)(""),D=Object(i.a)(x,2),F=D[0],J=D[1],L=Object(a.useState)(""),N=Object(i.a)(L,2),V=N[0],A=N[1];Object(a.useEffect)((function(){v().then((function(e){return c(e)}))}),[]);var B=function(e){return function(n){e(n.target.value)}},P=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;n?A(e):J(e),setTimeout((function(){n?A(""):J("")}),t)},T=function(e){window.confirm("".concat(b," is already added to phonebook, replace the old number with a new one?"))&&E(e,{name:b,number:w}).then((function(e){var n=t.findIndex((function(n){return n.id===e.id})),a=Object(o.a)(t);a.splice(n,1,e),c(a),P("Updated ".concat(e.name,"'s number"))})).catch((function(n){c(t.filter((function(n){return n.id!==e}))),P("Information of ".concat(b,"  has already been removed from the server"),!0)}))},U=function(){p({name:b,number:w}).then((function(e){c([].concat(Object(o.a)(t),[e])),P("Added ".concat(e.name))}))};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),F&&r.a.createElement(d,{message:F}),V&&r.a.createElement(d,{message:V,error:!0}),r.a.createElement(l,{onChange:B(I)}),r.a.createElement("h3",null,"add a new"),r.a.createElement(m,{onSubmit:function(e){e.preventDefault(),t.find((function(e){return e.name===b}))?T(t.filter((function(e){return e.name===b}))[0].id):U(),h(""),C("")},name:b,nameChange:B(h),numberChange:B(C),number:w}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(f,{persons:t,filterVal:y,deleteFn:function(e){window.confirm("Delete ".concat(e.name," ?"))&&g(e.id).then((function(n){c(t.filter((function(n){return n.id!==e.id})))}))}}))};u.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.12d43790.chunk.js.map